# Define a server block that listens on port 80 and serves requests for the "pi" server_name
server {
  listen 80;
  # Define a location block for the root path "/"
  location / {
  # Forward incoming requests to a server running on localhost:3001
    proxy_pass http://localhost:3001;
    # Set the "Host" header to the value of the original host name
    proxy_set_header Host $host;
    # Set the "X-Real-IP" header to the IP address of the client
    proxy_set_header X-Real-IP $remote_addr;
    # Set the "X-Forwarded-For" header to a list of all IP addresses that the request passed through
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
  # Define a named location block "@backend" for requests that should be handled by the backend server
  location /api {
    # Forward incoming requests to a server running on localhost:3000
    proxy_pass http://localhost:3000;
    # Set the "Host" header to the value of the original host name
    proxy_set_header Host $host;
    # Set the "X-Real-IP" header to the IP address of the client
    proxy_set_header X-Real-IP $remote_addr;
    # Set the "X-Forwarded-For" header to a list of all IP addresses that the request passed through
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}
